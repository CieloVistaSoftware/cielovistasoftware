export const themes = {
  none: null,
  
  // Dark Themes
  'github-dark': {
    bg: '#0d1117',
    text: '#c9d1d9',
    primary: '#58a6ff',
    secondary: '#8b949e',
    accent: '#7ee787',
    border: '#30363d',
    heading: '#c9d1d9',
    link: '#58a6ff'
  },
  dracula: {
    bg: '#282a36',
    text: '#f8f8f2',
    primary: '#bd93f9',
    secondary: '#6272a4',
    accent: '#50fa7b',
    border: '#44475a',
    heading: '#ff79c6',
    link: '#8be9fd'
  },
  monokai: {
    bg: '#272822',
    text: '#f8f8f2',
    primary: '#66d9ef',
    secondary: '#75715e',
    accent: '#a6e22e',
    border: '#49483e',
    heading: '#f92672',
    link: '#66d9ef'
  },
  nord: {
    bg: '#2e3440',
    text: '#eceff4',
    primary: '#88c0d0',
    secondary: '#4c566a',
    accent: '#a3be8c',
    border: '#3b4252',
    heading: '#81a1c1',
    link: '#88c0d0'
  },
  'one-dark': {
    bg: '#282c34',
    text: '#abb2bf',
    primary: '#61afef',
    secondary: '#5c6370',
    accent: '#98c379',
    border: '#3e4451',
    heading: '#e06c75',
    link: '#61afef'
  },
  'tokyo-night': {
    bg: '#1a1b26',
    text: '#c0caf5',
    primary: '#7aa2f7',
    secondary: '#565f89',
    accent: '#9ece6a',
    border: '#24283b',
    heading: '#bb9af7',
    link: '#7aa2f7'
  },
  synthwave: {
    bg: '#2b213a',
    text: '#f8f8f2',
    primary: '#ff7edb',
    secondary: '#848bbd',
    accent: '#72f1b8',
    border: '#4d4162',
    heading: '#fede5d',
    link: '#ff7edb'
  },
  cyberpunk: {
    bg: '#000b1e',
    text: '#00f9ff',
    primary: '#ff00ff',
    secondary: '#0080ff',
    accent: '#00ff00',
    border: '#00264d',
    heading: '#ff0080',
    link: '#ff00ff'
  },
  'gruvbox-dark': {
    bg: '#282828',
    text: '#ebdbb2',
    primary: '#83a598',
    secondary: '#928374',
    accent: '#b8bb26',
    border: '#3c3836',
    heading: '#fb4934',
    link: '#83a598'
  },
  'material-dark': {
    bg: '#212121',
    text: '#eeffff',
    primary: '#82aaff',
    secondary: '#546e7a',
    accent: '#c3e88d',
    border: '#2e2e2e',
    heading: '#f07178',
    link: '#82aaff'
  },

  // Light Themes
  'github-light': {
    bg: '#ffffff',
    text: '#24292f',
    primary: '#0969da',
    secondary: '#57606a',
    accent: '#1a7f37',
    border: '#d0d7de',
    heading: '#24292f',
    link: '#0969da'
  },
  'solarized-light': {
    bg: '#fdf6e3',
    text: '#657b83',
    primary: '#268bd2',
    secondary: '#93a1a1',
    accent: '#859900',
    border: '#eee8d5',
    heading: '#586e75',
    link: '#268bd2'
  },
  'gruvbox-light': {
    bg: '#fbf1c7',
    text: '#3c3836',
    primary: '#076678',
    secondary: '#7c6f64',
    accent: '#79740e',
    border: '#ebdbb2',
    heading: '#9d0006',
    link: '#076678'
  },
  'material-light': {
    bg: '#fafafa',
    text: '#546e7a',
    primary: '#0277bd',
    secondary: '#90a4ae',
    accent: '#7cb342',
    border: '#e0e0e0',
    heading: '#37474f',
    link: '#0277bd'
  },
  'one-light': {
    bg: '#fafafa',
    text: '#383a42',
    primary: '#4078f2',
    secondary: '#a0a1a7',
    accent: '#50a14f',
    border: '#e5e5e6',
    heading: '#e45649',
    link: '#4078f2'
  },
  'catppuccin-latte': {
    bg: '#eff1f5',
    text: '#4c4f69',
    primary: '#1e66f5',
    secondary: '#6c6f85',
    accent: '#40a02b',
    border: '#dce0e8',
    heading: '#d20f39',
    link: '#1e66f5'
  },

  // Colorful Themes
  'synthwave-neon': {
    bg: '#241734',
    text: '#f9f9f9',
    primary: '#ff2e97',
    secondary: '#b893ce',
    accent: '#00d9ff',
    border: '#3d2b52',
    heading: '#fede5d',
    link: '#ff2e97'
  },
  outrun: {
    bg: '#0f0f23',
    text: '#f2f2f2',
    primary: '#fc1f7e',
    secondary: '#7e5bef',
    accent: '#0be7fb',
    border: '#1e1e3e',
    heading: '#ffee55',
    link: '#fc1f7e'
  },
  'miami-nights': {
    bg: '#14141f',
    text: '#f8f8f8',
    primary: '#ff6ac1',
    secondary: '#a7a7f2',
    accent: '#5ee4ff',
    border: '#2a2a40',
    heading: '#ffeb57',
    link: '#ff6ac1'
  },
  vaporwave: {
    bg: '#ffc1e0',
    text: '#5b2e48',
    primary: '#a85e9e',
    secondary: '#9d7cbd',
    accent: '#01cdfe',
    border: '#ffaddb',
    heading: '#ff71ce',
    link: '#a85e9e'
  },
  candy: {
    bg: '#fff0f5',
    text: '#5d3a5a',
    primary: '#ff69b4',
    secondary: '#ba68c8',
    accent: '#4dd0e1',
    border: '#ffe4f0',
    heading: '#ff1493',
    link: '#ff69b4'
  },
  sunset: {
    bg: '#1a1a2e',
    text: '#eaeaea',
    primary: '#ff6b6b',
    secondary: '#ee5a6f',
    accent: '#feca57',
    border: '#16213e',
    heading: '#ff9ff3',
    link: '#ff6b6b'
  },

  // Minimalist Themes
  monochrome: {
    bg: '#000000',
    text: '#ffffff',
    primary: '#888888',
    secondary: '#666666',
    accent: '#cccccc',
    border: '#333333',
    heading: '#ffffff',
    link: '#aaaaaa'
  },
  'minimal-dark': {
    bg: '#1c1c1c',
    text: '#e0e0e0',
    primary: '#808080',
    secondary: '#606060',
    accent: '#a0a0a0',
    border: '#2e2e2e',
    heading: '#ffffff',
    link: '#909090'
  },
  'minimal-light': {
    bg: '#ffffff',
    text: '#333333',
    primary: '#666666',
    secondary: '#999999',
    accent: '#444444',
    border: '#e0e0e0',
    heading: '#000000',
    link: '#555555'
  },
  zen: {
    bg: '#f5f5f0',
    text: '#4a4a4a',
    primary: '#7a7a7a',
    secondary: '#9a9a9a',
    accent: '#5a5a5a',
    border: '#d5d5d0',
    heading: '#2a2a2a',
    link: '#6a6a6a'
  },
  paper: {
    bg: '#fffff8',
    text: '#2e2e2e',
    primary: '#5e5e5e',
    secondary: '#8e8e8e',
    accent: '#3e3e3e',
    border: '#e8e8e0',
    heading: '#1e1e1e',
    link: '#4e4e4e'
  },

  // Professional Themes
  corporate: {
    bg: '#f4f7fa',
    text: '#2c3e50',
    primary: '#3498db',
    secondary: '#7f8c8d',
    accent: '#2ecc71',
    border: '#dce4ec',
    heading: '#34495e',
    link: '#3498db'
  },
  slate: {
    bg: '#1e293b',
    text: '#e2e8f0',
    primary: '#38bdf8',
    secondary: '#64748b',
    accent: '#10b981',
    border: '#334155',
    heading: '#f1f5f9',
    link: '#38bdf8'
  },
  navy: {
    bg: '#0a1929',
    text: '#b2bac2',
    primary: '#3ea6ff',
    secondary: '#6e7781',
    accent: '#46a758',
    border: '#1f2a37',
    heading: '#e3e8ef',
    link: '#3ea6ff'
  },
  forest: {
    bg: '#0d1b0e',
    text: '#c8d6c9',
    primary: '#66bb6a',
    secondary: '#7c8c7c',
    accent: '#9ccc65',
    border: '#1e3a1f',
    heading: '#a5d6a7',
    link: '#66bb6a'
  },
  burgundy: {
    bg: '#2d0d0d',
    text: '#e6c5c5',
    primary: '#e57373',
    secondary: '#9c7c7c',
    accent: '#ef5350',
    border: '#4d1d1d',
    heading: '#ffcdd2',
    link: '#e57373'
  },

  // Fun Themes
  bubblegum: {
    bg: '#ffe4f0',
    text: '#5a3a52',
    primary: '#ff69b4',
    secondary: '#db7093',
    accent: '#ff1493',
    border: '#ffc0e0',
    heading: '#c71585',
    link: '#ff69b4'
  },
  'cotton-candy': {
    bg: '#e0f2ff',
    text: '#3a4a5a',
    primary: '#8ec5fc',
    secondary: '#a2c9e8',
    accent: '#e0c3fc',
    border: '#c0e0ff',
    heading: '#667eea',
    link: '#8ec5fc'
  },
  ocean: {
    bg: '#001f3f',
    text: '#b8e6ff',
    primary: '#0074d9',
    secondary: '#39cccc',
    accent: '#7fdbff',
    border: '#003d7a',
    heading: '#7fdbff',
    link: '#0074d9'
  },
  lava: {
    bg: '#1a0000',
    text: '#ffd4b2',
    primary: '#ff4500',
    secondary: '#ff6347',
    accent: '#ffa500',
    border: '#330000',
    heading: '#ff7f50',
    link: '#ff4500'
  },
  aurora: {
    bg: '#0a1e28',
    text: '#d4f1f4',
    primary: '#05dfd7',
    secondary: '#5eead4',
    accent: '#06ffa5',
    border: '#163843',
    heading: '#2dd4bf',
    link: '#05dfd7'
  },
  galaxy: {
    bg: '#0f0820',
    text: '#e0d8f0',
    primary: '#9d4edd',
    secondary: '#7b2cbf',
    accent: '#c77dff',
    border: '#1e1040',
    heading: '#e0aaff',
    link: '#9d4edd'
  },
  'forest-night': {
    bg: '#0d2818',
    text: '#c8e6d0',
    primary: '#52b788',
    secondary: '#74c69d',
    accent: '#95d5b2',
    border: '#1a4030',
    heading: '#b7e4c7',
    link: '#52b788'
  },
  desert: {
    bg: '#2e1f0f',
    text: '#f5e6d3',
    primary: '#d4a574',
    secondary: '#c19a6b',
    accent: '#e8c99b',
    border: '#4a3520',
    heading: '#f0d9b5',
    link: '#d4a574'
  }
};

function generateThemeCSS(theme) {
  if (!theme) return '';
  
  return `
    body {
      background-color: ${theme.bg} !important;
      color: ${theme.text} !important;
    }
    
    h1, h2, h3, h4, h5, h6 {
      color: ${theme.heading} !important;
    }
    
    a {
      color: ${theme.link} !important;
    }
    
    a:hover {
      color: ${theme.primary} !important;
    }
    
    button, .button, input[type="button"], input[type="submit"] {
      background-color: ${theme.primary} !important;
      color: ${theme.bg} !important;
      border: 1px solid ${theme.border} !important;
    }
    
    button:hover, .button:hover {
      background-color: ${theme.accent} !important;
    }
    
    input, textarea, select {
      background-color: ${theme.bg} !important;
      color: ${theme.text} !important;
      border: 1px solid ${theme.border} !important;
    }
    
    input:focus, textarea:focus, select:focus {
      border-color: ${theme.primary} !important;
      outline: 2px solid ${theme.primary}33 !important;
    }
    
    hr {
      border-color: ${theme.border} !important;
    }
    
    code, pre {
      background-color: ${theme.border} !important;
      color: ${theme.text} !important;
    }
    
    table {
      border-color: ${theme.border} !important;
    }
    
    th {
      background-color: ${theme.primary}33 !important;
      color: ${theme.heading} !important;
    }
    
    td {
      border-color: ${theme.border} !important;
    }
    
    .primary { color: ${theme.primary} !important; }
    .secondary { color: ${theme.secondary} !important; }
    .accent { color: ${theme.accent} !important; }
  `;
}

let currentTheme = 'none';

export function applyPreviewTheme(themeName) {
  currentTheme = themeName;
  const theme = themes[themeName];
  
  // Apply to main preview
  const mainPreview = document.getElementById('preview');
  if (mainPreview && mainPreview.contentWindow) {
    applyThemeToFrame(mainPreview, theme);
  }
  
  // Apply to split preview
  const splitPreview = document.getElementById('splitPreviewFrame');
  if (splitPreview && splitPreview.contentWindow) {
    applyThemeToFrame(splitPreview, theme);
  }
  
  // Save to localStorage
  localStorage.setItem('selectedTheme', themeName);
}

function applyThemeToFrame(iframe, theme) {
  try {
    const doc = iframe.contentDocument || iframe.contentWindow.document;
    
    // Remove existing theme style
    const existingStyle = doc.getElementById('theme-style');
    if (existingStyle) {
      existingStyle.remove();
    }
    
    if (theme) {
      // Add new theme style
      const style = doc.createElement('style');
      style.id = 'theme-style';
      style.textContent = generateThemeCSS(theme);
      doc.head.appendChild(style);
    }
  } catch (error) {
    console.error('Error applying theme to iframe:', error);
  }
}

export function initThemes() {
  // Load saved theme
  const savedTheme = localStorage.getItem('selectedTheme') || 'none';
  const selector = document.getElementById('themeSelector');
  if (selector) {
    selector.value = savedTheme;
  }
  currentTheme = savedTheme;
}

export function reapplyCurrentTheme() {
  if (currentTheme && currentTheme !== 'none') {
    applyPreviewTheme(currentTheme);
  }
}

// Make globally available
window.applyPreviewTheme = applyPreviewTheme;
